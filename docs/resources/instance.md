---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "maas_instance Resource - terraform-provider-maas"
subcategory: ""
description: |-
  Provides a resource to deploy and release machines already configured in MAAS, based on the specified parameters. If no parameters are given, a random machine will be allocated and deployed using the defaults.
  NOTE: The MAAS provider currently provides both standalone resources and in-line resources for network interfaces. You cannot use in-line network interfaces in conjunction with any standalone network interfaces resources. Doing so will cause conflicts and will overwrite network configs.
---

# maas_instance (Resource)

Provides a resource to deploy and release machines already configured in MAAS, based on the specified parameters. If no parameters are given, a random machine will be allocated and deployed using the defaults.

**NOTE:** The MAAS provider currently provides both standalone resources and in-line resources for network interfaces. You cannot use in-line network interfaces in conjunction with any standalone network interfaces resources. Doing so will cause conflicts and will overwrite network configs.

## Example Usage

```terraform
resource "maas_instance" "kvm" {
  count = 2
  allocate_params {
    hostname      = maas_vm_host_machine.kvm[count.index].hostname
    min_cpu_count = 1
    min_memory    = 2048
    tags = [
      maas_tag.virtual.name,
      maas_tag.kvm.name,
      maas_tag.ubuntu.name,
    ]
  }
  deploy_params {
    distro_series = "focal"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `allocate_params` (Block List, Max: 1) Nested argument with the constraints used to machine allocation. Defined below. (see [below for nested schema](#nestedblock--allocate_params))
- `deploy_params` (Block List, Max: 1) Nested argument with the config used to deploy the allocated machine. Defined below. (see [below for nested schema](#nestedblock--deploy_params))
- `network_interfaces` (Block Set) Specifies a network interface configuration done before the machine is deployed. Parameters defined below. This argument is processed in [attribute-as-blocks mode](https://www.terraform.io/docs/configuration/attr-as-blocks.html). (see [below for nested schema](#nestedblock--network_interfaces))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `cpu_count` (Number) The number of CPU cores of the deployed MAAS machine.
- `fqdn` (String) The deployed MAAS machine FQDN.
- `hostname` (String) The deployed MAAS machine hostname.
- `id` (String) The ID of this resource.
- `ip_addresses` (Set of String) A set of IP addressed assigned to the deployed MAAS machine.
- `memory` (Number) The RAM memory size (in GiB) of the deployed MAAS machine.
- `pool` (String) The deployed MAAS machine pool name.
- `tags` (Set of String) A set of tag names associated to the deployed MAAS machine.
- `zone` (String) The deployed MAAS machine zone name.

<a id="nestedblock--allocate_params"></a>
### Nested Schema for `allocate_params`

Optional:

- `hostname` (String) The hostname of the MAAS machine to be allocated.
- `min_cpu_count` (Number) The minimum number of cores used to allocate the MAAS machine.
- `min_memory` (Number) The minimum RAM memory size (in MB) used to allocate the MAAS machine.
- `pool` (String) The pool name of the MAAS machine to be allocated.
- `system_id` (String) The system_id of the MAAS machine to be allocated.
- `tags` (Set of String) A set of tag names that must be assigned on the MAAS machine to be allocated.
- `zone` (String) The zone name of the MAAS machine to be allocated.


<a id="nestedblock--deploy_params"></a>
### Nested Schema for `deploy_params`

Optional:

- `distro_series` (String) The distro series used to deploy the allocated MAAS machine. If it's not given, the MAAS server default value is used.
- `enable_hw_sync` (Boolean) Periodically sync hardware
- `hwe_kernel` (String) Hardware enablement kernel to use with the image. Only used when deploying Ubuntu.
- `user_data` (String) Cloud-init user data script that gets run on the machine once it has deployed. A good practice is to set this with `file("/tmp/user-data.txt")`, where `/tmp/user-data.txt` is a cloud-init script.


<a id="nestedblock--network_interfaces"></a>
### Nested Schema for `network_interfaces`

Required:

- `name` (String) The name of the network interface to be configured on the allocated machine.

Optional:

- `ip_address` (String) Static IP address to be configured on the network interface. If this is set, the `subnet_cidr` is required.

**NOTE:** If both `subnet_cidr` and `ip_address` are not defined, the interface will not be configured on the allocated machine.
- `subnet_cidr` (String) An existing subnet CIDR used to configure the network interface. Unless `ip_address` is defined, a free IP address is allocated from the subnet.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)

## Import

Import is supported using the following syntax:

```shell
# The machines imported as `maas_instance` resources must be already deployed. They can be imported using one of the deployed machine attributes: system ID, hostname, or FQDN. e.g.
$ terraform import maas_instance.virsh_vm machine-01
```
